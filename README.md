# ğŸŒ¤ï¸ æ™ºæ…§å¤©æ°£åˆ†æç³»çµ±

å³æ™‚å¤©æ°£æŸ¥è©¢èˆ‡ AI æ™ºæ…§åˆ†æç³»çµ±ï¼Œæ”¯æ´å°ç£ 12 å€‹ä¸»è¦åŸå¸‚ã€‚çµåˆ OpenWeatherMap å¤©æ°£è³‡æ–™èˆ‡ OpenAI GPT æ™ºæ…§åˆ†æï¼Œæä¾›å¤©æ°£é å ±ã€æ´»å‹•å»ºè­°ã€ç©¿æ­å»ºè­°ã€å¥åº·æé†’ã€æ—…éŠæ¨è–¦ã€åŸå¸‚æ¯”è¼ƒã€ç©ºæ°£å“è³ªåŠäº’å‹•å¼å¤©æ°£åœ°åœ–ã€‚

> **ç„¡ OpenAI Key ä¹Ÿèƒ½ä½¿ç”¨** â€” ç³»çµ±å…§å»ºè¦å‰‡å¼•æ“ï¼Œæä¾›åŸºç¤å¤©æ°£åˆ†æï¼›æœ‰ Key å‰‡è‡ªå‹•å‡ç´šç‚º GPT æ·±åº¦åˆ†æã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| ğŸ“ å³æ™‚å¤©æ°£ | æº«åº¦ã€é«”æ„Ÿæº«åº¦ã€æ¿•åº¦ã€é¢¨é€Ÿã€é›²é‡ã€æ°£å£“ã€æ—¥å‡ºæ—¥è½ |
| ğŸ“Š 5å¤©é å ± | äº’å‹•å¼ Plotly åœ–è¡¨ï¼šæº«åº¦è¶¨å‹¢ã€é™é›¨æ©Ÿç‡ã€æ¿•åº¦ã€é¢¨é€Ÿ |
| ğŸ“… æ¯æ—¥é å ± | å¡ç‰‡å¼ 5 æ—¥å¤©æ°£ç¸½è¦½ï¼ˆRWD éŸ¿æ‡‰å¼è¨­è¨ˆï¼‰ |
| ğŸ¤– AI æ™ºæ…§åˆ†æ | GPT æ·±åº¦åˆ†æï¼ˆæœ‰ Keyï¼‰/ è¦å‰‡å¼•æ“åŸºç¤åˆ†æï¼ˆç„¡ Keyï¼‰ |
| âœˆï¸ æ—…éŠæ¨è–¦ | æ ¹æ“šæº«åº¦/é™é›¨/é¢¨é€Ÿ/æ¿•åº¦ç¶œåˆè©•åˆ†ï¼Œæ¨è–¦æœ€ä½³å‡ºéŠæ—¥ |
| ğŸ”„ åŸå¸‚æ¯”è¼ƒ | 2-4 åŸå¸‚ä¸¦æ’æ¯”è¼ƒæº«åº¦èˆ‡é™é›¨è¶¨å‹¢ |
| ğŸŒ¬ï¸ ç©ºæ°£å“è³ª | å³æ™‚ AQI æŒ‡æ¨™ + PM2.5/PM10/O3 + 12 åŸå¸‚æ’è¡Œ |
| ğŸ—ºï¸ å¤©æ°£åœ°åœ– | äº’å‹•å¼å°ç£åœ°åœ–ï¼Œ12 åŸå¸‚æº«åº¦æ¨™è¨˜ + AQI è³‡è¨Š |
| â˜€ï¸ UV æŒ‡æ•¸ | ç´«å¤–ç·šæŒ‡æ•¸ 5 ç´šåˆ†é¡ + é˜²æ›¬å»ºè­°ï¼ˆOne Call APIï¼‰ |
| ğŸ”¥ ç†±åŠ›åœ– | æº«åº¦ / é™é›¨æ©Ÿç‡æ™‚æ®µ Ã— æ—¥æœŸäº’å‹•å¼ç†±åŠ›åœ– |
| ğŸ”— åˆ†äº«åŠŸèƒ½ | URL åƒæ•¸åˆ†äº«ï¼ˆåŸå¸‚ + èªè¨€ï¼‰+ æ–‡å­—æ‘˜è¦ |
| âš ï¸ å¤©æ°£è­¦å ± | è¦å‰‡å¼è­¦å ± + One Call 3.0 å®˜æ–¹è­¦å ± |
| ğŸŒ™ æ·±è‰²æ¨¡å¼ | CSS è‡ªå‹•åµæ¸¬ç³»çµ±ä¸»é¡Œï¼ŒPlotly åœ–è¡¨åŒæ­¥åˆ‡æ› |
| ğŸŒ å¤šèªè¨€ | ç¹é«”ä¸­æ–‡ / English å³æ™‚åˆ‡æ› |
| ğŸ“± éŸ¿æ‡‰å¼ | æ¡Œé¢ / æ‰‹æ©Ÿè‡ªå‹•èª¿æ•´ç‰ˆé¢ |
| ğŸ“¥ å ±å‘Šä¸‹è¼‰ | å¯åŒ¯å‡ºå®Œæ•´åˆ†æå ±å‘Š TXT æª” |
| âœ… å–®å…ƒæ¸¬è©¦ | 99 å€‹æ¸¬è©¦è¦†è“‹ç´”é‚è¼¯æ¨¡çµ„ï¼ˆ`uv run pytest tests/ -v`ï¼‰ |

### æ”¯æ´åŸå¸‚

å°åŒ—ã€æ–°åŒ—ã€æ¡ƒåœ’ã€å°ä¸­ã€å°å—ã€é«˜é›„ã€åŸºéš†ã€æ–°ç«¹ã€å˜‰ç¾©ã€å®œè˜­ã€èŠ±è“®ã€å°æ±

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚

- Python 3.10+
- [OpenWeatherMap API Key](https://openweathermap.org/api)ï¼ˆå…è²»ï¼Œå¿…å¡«ï¼‰
- [OpenAI API Key](https://platform.openai.com/api-keys)ï¼ˆå¯é¸ï¼ŒGPT æ·±åº¦åˆ†æï¼‰
- [ç’°å¢ƒéƒ¨ AQI API Key](https://data.moenv.gov.tw/)ï¼ˆå¯é¸ï¼Œç©ºæ°£å“è³ªï¼‰
- [One Call API 3.0 Key](https://openweathermap.org/api/one-call-3)ï¼ˆå¯é¸ï¼Œå®˜æ–¹è­¦å ±ï¼‰

### æœ¬åœ°é–‹ç™¼ï¼ˆä½¿ç”¨ uvï¼‰

```bash
# 1. è¤‡è£½å°ˆæ¡ˆ
git clone https://github.com/lovexyz520/weather-analysis-system.git
cd weather-analysis-system

# 2. å®‰è£ä¾è³´
uv sync

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .envï¼Œå¡«å…¥ä½ çš„ API Key

# 4. å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
uv run streamlit run src/weather_analysis/app.py
```

### Streamlit Cloud éƒ¨ç½²

1. Fork æœ¬å°ˆæ¡ˆåˆ°ä½ çš„ GitHub
2. å‰å¾€ [Streamlit Cloud](https://share.streamlit.io/) å»ºç«‹æ–°æ‡‰ç”¨
3. è¨­å®šï¼š
   - **Main file path**: `src/weather_analysis/app.py`
   - **Settings > Secrets** ä¸­å¡«å…¥ï¼š
     ```toml
     OPENWEATHER_API_KEY = "ä½ çš„é‡‘é‘°"
     OPENAI_API_KEY = "ä½ çš„é‡‘é‘°"      # å¯é¸
     AQI_API_KEY = "ä½ çš„é‡‘é‘°"          # å¯é¸
     ONECALL_API_KEY = "ä½ çš„é‡‘é‘°"      # å¯é¸
     ```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
weather-analysis-system/
â”œâ”€â”€ pyproject.toml              # å°ˆæ¡ˆè¨­å®šï¼ˆuv / hatchlingï¼‰
â”œâ”€â”€ requirements.txt            # Streamlit Cloud ä¾è³´
â”œâ”€â”€ .env.example                # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .streamlit/
â”‚   â””â”€â”€ secrets.toml.example    # Streamlit Cloud secrets ç¯„ä¾‹
â”œâ”€â”€ README.md
â””â”€â”€ src/
    â””â”€â”€ weather_analysis/
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ app.py              # Streamlit ä¸»ç¨‹å¼ï¼ˆ8 å€‹ tabï¼‰
        â”œâ”€â”€ config.py           # è¨­å®šæª”ï¼ˆAPI Key è¼‰å…¥é‚è¼¯ï¼‰
        â”œâ”€â”€ weather_api.py      # OpenWeatherMap API æ•´åˆ
        â”œâ”€â”€ visualization.py    # Plotly åœ–è¡¨ç”Ÿæˆ
        â”œâ”€â”€ ai_analyzer.py      # AI åˆ†æï¼ˆGPT + è¦å‰‡å¼•æ“ fallbackï¼‰
        â”œâ”€â”€ i18n.py             # å¤šèªè¨€æ”¯æ´ï¼ˆç¹ä¸­ / Englishï¼‰
        â”œâ”€â”€ alerts.py           # å¤©æ°£è­¦å ±ç³»çµ±
        â”œâ”€â”€ travel.py           # æ—…éŠæœ€ä½³æ—¥æ¨è–¦
        â””â”€â”€ aqi_api.py          # ç©ºæ°£å“è³ª AQI æ•´åˆ
â””â”€â”€ tests/                      # å–®å…ƒæ¸¬è©¦ï¼ˆ99 testsï¼‰
    â”œâ”€â”€ test_travel.py
    â”œâ”€â”€ test_aqi.py
    â”œâ”€â”€ test_alerts.py
    â””â”€â”€ test_uv.py
```

## ğŸ”‘ API Key ç®¡ç†

ç³»çµ±æ”¯æ´ä¸‰ç¨® API Key ä¾†æºï¼Œ**å„ªå…ˆé †åºç”±é«˜åˆ°ä½**ï¼š

| å„ªå…ˆé †åº | ä¾†æº | èªªæ˜ |
|----------|------|------|
| 1 | å´é‚Šæ¬„è¼¸å…¥ | ä½¿ç”¨è€…åœ¨ UI å³æ™‚è¼¸å…¥ï¼ˆä¸å­˜æª”ï¼‰ |
| 2 | `.env` æª”æ¡ˆ | æœ¬åœ°é–‹ç™¼ç”¨ï¼Œ`config.py` è‡ªå‹•è¼‰å…¥ |
| 3 | `st.secrets` | Streamlit Cloud éƒ¨ç½²ç”¨ |

- å´é‚Šæ¬„è¼¸å…¥æ¬„ä½**æ°¸é ç©ºç™½**ï¼Œä¸æœƒé¡¯ç¤º `.env` ä¸­çš„é‡‘é‘°å€¼
- åµæ¸¬åˆ°ç’°å¢ƒè®Šæ•¸æ™‚åƒ…é¡¯ç¤ºã€Œâœ… å·²å¾ç’°å¢ƒè®Šæ•¸è¼‰å…¥ã€ç‹€æ…‹æç¤º
- ä½¿ç”¨è€…é¡å¤–è¼¸å…¥çš„ Key æœƒè¦†è“‹ç’°å¢ƒè®Šæ•¸

### å¯ç”¨ API Key

| Key | ç”¨é€” | å¿…è¦æ€§ |
|-----|------|--------|
| `OPENWEATHER_API_KEY` | å¤©æ°£è³‡æ–™æŸ¥è©¢ | å¿…å¡« |
| `OPENAI_API_KEY` | GPT æ·±åº¦åˆ†æ | å¯é¸ |
| `AQI_API_KEY` | ç©ºæ°£å“è³ªè³‡æ–™ | å¯é¸ |
| `ONECALL_API_KEY` | å®˜æ–¹å¤©æ°£è­¦å ± | å¯é¸ |

## ğŸ“Š AI åˆ†ææ¨¡å¼

| æ¨¡å¼ | æ¢ä»¶ | èªªæ˜ |
|------|------|------|
| ğŸ¤– GPT æ·±åº¦åˆ†æ | æœ‰ OpenAI API Key | å‘¼å« GPT-4o-mini ç”¢ç”Ÿå€‹äººåŒ–åˆ†æ |
| ğŸ“Š åŸºç¤è¦å‰‡åˆ†æ | ç„¡ OpenAI API Key | ä½¿ç”¨å…§å»ºè¦å‰‡å¼•æ“ï¼Œä¾é–¾å€¼ç”¢ç”Ÿåˆ†æ |
| âš ï¸ è‡ªå‹• Fallback | GPT å‘¼å«å¤±æ•— | è‡ªå‹•åˆ‡æ›ç‚ºè¦å‰‡å¼•æ“ï¼Œä¸ä¸­æ–·é«”é©— |

## ğŸ”§ æŠ€è¡“æ£§

- **å¥—ä»¶ç®¡ç†**: [uv](https://docs.astral.sh/uv/) + hatchling
- **å‰ç«¯æ¡†æ¶**: Streamlit
- **è³‡æ–™è™•ç†**: Pandas
- **è¦–è¦ºåŒ–**: Plotly
- **åœ°åœ–**: Folium + streamlit-folium
- **AI åˆ†æ**: OpenAI API (GPT-4o-mini)
- **ç’°å¢ƒç®¡ç†**: python-dotenv

## ğŸ› å¸¸è¦‹å•é¡Œ

### é¡¯ç¤ºã€Œè«‹åœ¨å´é‚Šæ¬„è¼¸å…¥ API Keyã€
- ç¢ºèª `.env` ä¸­çš„ `OPENWEATHER_API_KEY` å·²æ­£ç¢ºè¨­å®š
- æˆ–åœ¨å´é‚Šæ¬„ç›´æ¥è¼¸å…¥ API Key
- æ–°ç”³è«‹çš„ OpenWeatherMap Key å¯èƒ½éœ€è¦ 2-3 å°æ™‚å•Ÿç”¨

### AI åˆ†æé¡¯ç¤ºã€ŒåŸºç¤è¦å‰‡åˆ†æã€
- é€™æ˜¯æ­£å¸¸è¡Œç‚ºï¼Œä»£è¡¨æœªåµæ¸¬åˆ° OpenAI API Key
- å¦‚éœ€ GPT æ·±åº¦åˆ†æï¼Œè«‹è¨­å®š `OPENAI_API_KEY`

### ç©ºæ°£å“è³ªé¡¯ç¤ºã€Œè«‹è¼¸å…¥ AQI API Keyã€
- å‰å¾€ [ç’°å¢ƒéƒ¨é–‹æ”¾è³‡æ–™å¹³å°](https://data.moenv.gov.tw/) å…è²»ç”³è«‹ API Key
- è¨­å®š `AQI_API_KEY` ç’°å¢ƒè®Šæ•¸æˆ–åœ¨å´é‚Šæ¬„è¼¸å…¥

### Streamlit Cloud éƒ¨ç½²å¤±æ•—
- ç¢ºèª `requirements.txt` å­˜åœ¨æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„
- ç¢ºèª Main file path è¨­å®šç‚º `src/weather_analysis/app.py`
- åœ¨ Settings > Secrets ä¸­æ­£ç¢ºè¨­å®š API Key

## ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…

William Cheng

## ğŸ“„ æˆæ¬Š

MIT License

---

**ç‰ˆæœ¬**: 1.2.0
**æ›´æ–°æ—¥æœŸ**: 2026 å¹´ 2 æœˆ
